[gd_scene load_steps=19 format=3 uid="uid://d2rbou6dglon"]

[ext_resource type="Script" path="res://addons/BehavForGroups/BehavForGroups.gd" id="1_wqrga"]
[ext_resource type="Script" path="res://addons/BehavForGroups/Behavior.gd" id="2_yfr04"]
[ext_resource type="Script" path="res://addons/BehavForGroups/ForceRandom.gd" id="3_h41sa"]
[ext_resource type="Script" path="res://addons/BehavForGroups/ForceGlobal.gd" id="4_6bt5m"]
[ext_resource type="Script" path="res://addons/BehavForGroups/StayInBox.gd" id="5_tu27f"]
[ext_resource type="Script" path="res://addons/BehavForGroups/Sequential.gd" id="6_u1vim"]
[ext_resource type="PackedScene" uid="uid://8d1mmxxnxnxy" path="res://addons/BehavForGroups/Examples/Coagulation/Fibro.tscn" id="7_6b6ua"]
[ext_resource type="Script" path="res://addons/BehavForGroups/IfGridValueIsSup.gd" id="9_leyu0"]
[ext_resource type="Script" path="res://addons/BehavForGroups/IfCollision.gd" id="10_4dgow"]
[ext_resource type="Script" path="res://addons/BehavForGroups/ChangeColor.gd" id="11_4pl0m"]
[ext_resource type="Script" path="res://addons/BehavForGroups/AddSpringOnContact.gd" id="11_ihhew"]
[ext_resource type="Script" path="res://addons/BehavForGroups/SetState.gd" id="12_f5fdc"]
[ext_resource type="Script" path="res://addons/BehavForGroups/IfStateEquals.gd" id="13_d5aqs"]
[ext_resource type="Script" path="res://addons/BehavForGroups/ForceToGridValue.gd" id="14_6gg0k"]
[ext_resource type="Script" path="res://addons/BehavForGroups/SetGridValue.gd" id="15_jtirm"]
[ext_resource type="Script" path="res://addons/BehavForGroups/PrintMessage.gd" id="16_70ee2"]
[ext_resource type="PackedScene" uid="uid://c7hylydq3sl81" path="res://addons/BehavForGroups/Examples/Coagulation/Platelet.tscn" id="16_loo5f"]
[ext_resource type="PackedScene" uid="uid://yq5y0be22p2p" path="res://Grid2D0.tscn" id="20_3fwqe"]

[node name="Coagulation" type="Node2D"]

[node name="BehavForGroups" type="Node" parent="."]
script = ExtResource("1_wqrga")

[node name="Circulating" type="Node" parent="BehavForGroups"]
script = ExtResource("2_yfr04")
on_group = "circulating"

[node name="ForceRandom" type="Node" parent="BehavForGroups/Circulating"]
script = ExtResource("3_h41sa")
fx = 5.0
fy = 5.0
fz = 0.0

[node name="ForceGlobal" type="Node" parent="BehavForGroups/Circulating"]
script = ExtResource("4_6bt5m")
fx = 1.0

[node name="StayInBox" type="Node" parent="BehavForGroups/Circulating"]
script = ExtResource("5_tu27f")
min = Vector3(0, 100, 0)
max = Vector3(1130, 600, 0)
loop_x = true

[node name="Platelets" type="Node" parent="BehavForGroups"]
script = ExtResource("2_yfr04")
on_group = "platelet"

[node name="GoToLesion" type="Node" parent="BehavForGroups/Platelets"]
script = ExtResource("14_6gg0k")
on_grid_group = "grd"
value_to_go = 1.0
force = 0.2

[node name="Activation" type="Node" parent="BehavForGroups/Platelets"]
script = ExtResource("6_u1vim")

[node name="IfStateEquals_0" type="Node" parent="BehavForGroups/Platelets/Activation"]
script = ExtResource("13_d5aqs")

[node name="IfGridValueIsSup" type="Node" parent="BehavForGroups/Platelets/Activation"]
script = ExtResource("9_leyu0")
on_grid_group = "grd"
is_sup_to = 0.05

[node name="SetState_1" type="Node" parent="BehavForGroups/Platelets/Activation"]
script = ExtResource("12_f5fdc")
set_to_value = 1

[node name="ChangeColor_cyan" type="Node" parent="BehavForGroups/Platelets/Activation"]
script = ExtResource("11_4pl0m")
color = Color(0.298039, 1, 0.862745, 1)

[node name="FixOnFibro" type="Node" parent="BehavForGroups/Platelets"]
script = ExtResource("6_u1vim")

[node name="IfStateEquals_1" type="Node" parent="BehavForGroups/Platelets/FixOnFibro"]
script = ExtResource("13_d5aqs")
state_equals = 1

[node name="AddSpring_with_fibro_1" type="Node" parent="BehavForGroups/Platelets/FixOnFibro"]
script = ExtResource("11_ihhew")
with_group = "fibro"
max_links = 4

[node name="SetState_2" type="Node" parent="BehavForGroups/Platelets/FixOnFibro"]
script = ExtResource("12_f5fdc")
set_to_value = 2

[node name="ChangeColor_rose" type="Node" parent="BehavForGroups/Platelets/FixOnFibro"]
script = ExtResource("11_4pl0m")
color = Color(0.996094, 0.585938, 0.910156, 1)

[node name="FixOnPlatFixed" type="Node" parent="BehavForGroups/Platelets"]
script = ExtResource("6_u1vim")

[node name="IfStateEquals_1" type="Node" parent="BehavForGroups/Platelets/FixOnPlatFixed"]
script = ExtResource("13_d5aqs")
state_equals = 1

[node name="AddSpring_platelet" type="Node" parent="BehavForGroups/Platelets/FixOnPlatFixed"]
script = ExtResource("11_ihhew")
with_group = "platelet"
in_state = 2
max_links = 4

[node name="PrintMessage" type="Node" parent="BehavForGroups/Platelets/FixOnPlatFixed"]
script = ExtResource("16_70ee2")
message = "*** LINK ***"

[node name="SetState_2" type="Node" parent="BehavForGroups/Platelets/FixOnPlatFixed"]
script = ExtResource("12_f5fdc")
set_to_value = 2

[node name="ChangeColor_green" type="Node" parent="BehavForGroups/Platelets/FixOnPlatFixed"]
script = ExtResource("11_4pl0m")
color = Color(0.505882, 0.866667, 0, 1)

[node name="Fibro" type="Node" parent="BehavForGroups"]
script = ExtResource("2_yfr04")
on_group = "fibro"

[node name="ProdFactors" type="Node" parent="BehavForGroups/Fibro"]
script = ExtResource("6_u1vim")

[node name="IfState_1" type="Node" parent="BehavForGroups/Fibro/ProdFactors"]
script = ExtResource("13_d5aqs")
state_equals = 1

[node name="SetGridValue_1" type="Node" parent="BehavForGroups/Fibro/ProdFactors"]
script = ExtResource("15_jtirm")
on_grid_group = "grd"
set_value = 1.0

[node name="Unactivate" type="Node" parent="BehavForGroups/Fibro"]
script = ExtResource("6_u1vim")

[node name="IfContact" type="Node" parent="BehavForGroups/Fibro/Unactivate"]
script = ExtResource("10_4dgow")
with_group = "platelet"
in_state = 1

[node name="SetState_0" type="Node" parent="BehavForGroups/Fibro/Unactivate"]
script = ExtResource("12_f5fdc")

[node name="ChangeColor" type="Node" parent="BehavForGroups/Fibro/Unactivate"]
script = ExtResource("11_4pl0m")
color = Color(0.631373, 0.203922, 0, 1)

[node name="Grid2D0" parent="." groups=["grd"] instance=ExtResource("20_3fwqe")]
offset_left = -1.0
offset_top = 69.0
offset_right = 1149.0
offset_bottom = 523.0
baseColor = Color(0, 0.337255, 0.839216, 0.960784)
show_iso = true
loop_x = true

[node name="VeinLow" type="StaticBody2D" parent="."]
position = Vector2(0, -106.59)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="VeinLow"]
self_modulate = Color(0.945098, 1, 0.894118, 1)
position = Vector2(44.1724, 16.6273)
scale = Vector2(5.15945, 5.00745)
build_mode = 1
polygon = PackedVector2Array(-7.69231, 148.85, 213.846, 149.058, 213.654, 121.558, 182.692, 114.892, 164.615, 107.183, 143.612, 104.749, 120.328, 112.425, 89.1234, 111.826, 71.5385, 105.517, 26.5297, 105.324, 10.7692, 115.933, -8.07692, 123.333)

[node name="Polygon2D" type="Polygon2D" parent="VeinLow"]
position = Vector2(38.78, -9.15)
scale = Vector2(5.21, 5.21)
color = Color(0.356863, 0.2, 0.14902, 1)
polygon = PackedVector2Array(-7.69231, 148.85, 213.846, 149.058, 213.654, 121.558, 182.692, 114.892, 164.615, 107.183, 143.612, 104.749, 120.577, 107.6, 99.0385, 108.433, 71.5385, 105.517, 26.5297, 105.324, 10.7692, 115.933, -8.07692, 123.333)

[node name="Polygon2D2" type="Polygon2D" parent="VeinLow"]
position = Vector2(38.78, -9.15)
scale = Vector2(5.21, 5.21)
color = Color(0.356863, 0.2, 0.14902, 1)
polygon = PackedVector2Array(-7.69231, 148.85, 213.846, 149.058, 213.654, 121.558, 182.692, 114.892, 164.615, 107.183, 143.612, 104.749, 120.577, 107.6, 99.0385, 108.433, 71.5385, 105.517, 26.5297, 105.324, 10.7692, 115.933, -8.07692, 123.333)

[node name="VeinUp" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="VeinUp"]
polygon = PackedVector2Array(0, 1, 1153, 1, 1153, 67, 887, 101, 779, 68, 598, 118, 516, 68, 445, 92, 385, 77, 298, 107, 216, 85, 122, 106, 46, 72, 0, 73, 0, 73)

[node name="Polygon2D" type="Polygon2D" parent="VeinUp"]
color = Color(0.356863, 0.2, 0.14902, 1)
polygon = PackedVector2Array(0, 1, 1153, 1, 1153, 67, 887, 101, 779, 68, 598, 118, 514, 77, 442, 96, 384, 80, 300, 109, 221, 88, 122, 106, 46, 72, 0, 73, 0, 73)

[node name="Fibro" parent="." instance=ExtResource("7_6b6ua")]
position = Vector2(507, 436)

[node name="Fibro2" parent="." instance=ExtResource("7_6b6ua")]
position = Vector2(549, 437)

[node name="Fibro3" parent="." instance=ExtResource("7_6b6ua")]
position = Vector2(507, 415)

[node name="Platelet" parent="." instance=ExtResource("16_loo5f")]
position = Vector2(271, 426)
age = 102529

[node name="Platelet2" parent="." instance=ExtResource("16_loo5f")]
position = Vector2(464, 424)
age = 102529

[node name="Platelet3" parent="." instance=ExtResource("16_loo5f")]
position = Vector2(392, 419)
age = 102529
